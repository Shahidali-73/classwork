{% extends 'base.html' %}
{% block content %}
  <h2>My Medicines</h2>

  <form method="get" style="margin-bottom:12px">
    <input type="text" name="q" placeholder="Search..." value="{{ q }}">
    <button type="submit">Search</button>
  </form>

  <table>
    <thead><tr><th>Name</th><th>Stock</th><th>Added At</th><th>Actions</th></tr></thead>
    <tbody>
      {% for med in page_obj.object_list %}
      <tr>
        <td>{{ med.name }}</td>
        <td>{{ med.stock }}</td>
        <td>{{ med.added_at|date:"Y-m-d H:i" }}</td>
        <td>
          <a href="{% url 'medicine_edit' med.pk %}">Edit</a> |
          <a href="{% url 'medicine_delete' med.pk %}">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4">No medicines found.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <div style="margin-top:12px">
    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    <div>
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}{% if q %}&q={{ q }}{% endif %}">Previous</a>
    {% endif %}
    {% for num in page_obj.paginator.page_range %}
      {% if num == page_obj.number %}
        <strong>{{ num }}</strong>
      {% else %}
        <a href="?page={{ num }}{% if q %}&q={{ q }}{% endif %}">{{ num }}</a>
      {% endif %}
    {% endfor %}
    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}{% if q %}&q={{ q }}{% endif %}">Next</a>
    {% endif %}
    </div>
  </div>

{% endblock %}
